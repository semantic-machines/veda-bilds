"use strict";

System.register(["jquery", "/js/common/veda.js", "/js/common/individual_model.js", "/js/common/backend.js"], function (_export, _context) {
  "use strict";

  var $, veda, IndividualModel, Backend, pre, post, html;
  return {
    setters: [function (_jquery) {
      $ = _jquery.default;
    }, function (_jsCommonVedaJs) {
      veda = _jsCommonVedaJs.default;
    }, function (_jsCommonIndividual_modelJs) {
      IndividualModel = _jsCommonIndividual_modelJs.default;
    }, function (_jsCommonBackendJs) {
      Backend = _jsCommonBackendJs.default;
    }],
    execute: function () {
      _export("pre", pre = function pre(individual, template, container, mode, extra) {
        template = $(template);
        container = $(container);
        if (individual.hasValue('rdf:type', 'v-s:RequestDelegationAdmin')) {
          $('#delegator-control', template).removeClass('-edit').addClass('edit');
          $('#delegator-value', template).removeClass('edit').addClass('-edit');
          $('#position-control', template).removeClass('-edit').addClass('edit');
          $('#position-container', template).removeClass('-edit').addClass('edit');
        } else {
          $('#custom-label', template).remove();
          $('#ignoreExclusive-control', template).remove();
          $('#official-control', template).remove();
        }
      });
      _export("post", post = function post(individual, template, container, mode, extra) {
        template = $(template);
        container = $(container);
        individual.on('v-s:delegatedPosition', delegatedPositionHandler);
        individual.on('v-s:delegator v-s:delegate', extractEmployee);
        individual.on('v-s:delegator', delegatorHandler);
        template.one('remove', function () {
          individual.off('v-s:delegatedPosition', delegatedPositionHandler);
          individual.off('v-s:delegator', extractEmployee);
          individual.off('v-s:delegate', extractEmployee);
          individual.off('v-s:delegator', delegatorHandler);
        });
        delegatedPositionHandler(individual['v-s:delegatedPosition']);
        var positionTemplate = $('#positions', template).html();
        $('#positions', template).empty().on('click', 'input', function (e) {
          var id = $(this).prop('id');
          var position = new IndividualModel(id);
          if ($(this).is(':checked')) {
            individual['v-s:delegatedPosition'] = individual['v-s:delegatedPosition'].concat(position);
          } else {
            individual['v-s:delegatedPosition'] = individual['v-s:delegatedPosition'].filter(function (item) {
              return item.id !== position.id;
            });
          }
        });
        function delegatedPositionHandler(values) {
          if (values.length) {
            $('#positions', template).removeClass('has-error');
          } else {
            $('#positions', template).addClass('has-error');
          }
        }
        function extractEmployee(property_uri, values) {
          if (values.length && values[0].hasValue('rdf:type', 'v-s:Appointment')) {
            individual[property_uri] = values[0]['v-s:employee'];
          }
        }
        function delegatorHandler(values) {
          $('#positions', template).empty();
          if (values.length) {
            var delegator = values[0];
            var queryStr = "( 'rdf:type' === 'v-s:Appointment' && 'v-s:employee' == '" + delegator.id + "' )";
            var delegatedPositions = [];
            Backend.query(veda.ticket, queryStr).then(function (queryResult) {
              return Backend.get_individuals(veda.ticket, queryResult.result);
            }).then(function (appointments) {
              var positions_ids = appointments.map(function (appointment_json) {
                var appointment = new IndividualModel(appointment_json);
                if (appointment.hasValue('v-s:dateFrom')) {
                  delegatedPositions.push(appointment['v-s:occupation'][0].id);
                }
                return appointment['v-s:occupation'][0].id;
              });
              return positions_ids;
            }).then(function (positions_ids) {
              return Backend.get_individuals(veda.ticket, positions_ids);
            }).then(function (positions) {
              positions.map(function (position_json) {
                var position = new IndividualModel(position_json);
                var tmpl = $(positionTemplate);
                var input = tmpl.find('.input');
                var label = tmpl.find('.position-label');
                if (individual.hasValue('v-s:delegatedPosition', position)) {
                  input.prop('checked', 'checked');
                }
                input.prop('id', position.id);
                if (delegatedPositions.indexOf(position.id) >= 0) {
                  label.text(position.toString() + ' (делегировано)');
                } else {
                  label.text(position.toString());
                }
                if (mode === 'view') {
                  input.prop('disabled', 'disabled');
                }
                tmpl.appendTo($('#positions', template));
              });
            });
          }
        }
        if (individual.isNew() && !individual.hasValue('v-s:delegator') && template.attr('data-mode') != 'search') {
          individual['v-s:delegator'] = [veda.user];
        } else if (individual.isNew() && individual.hasValue('v-s:delegator')) {
          delegatorHandler(individual['v-s:delegator']);
        }
        template.on('view edit', function (e) {
          if (e.type === 'view') {
            $('#positions', template).find('.input').prop('disabled', 'disabled');
          } else {
            $('#positions', template).find('.input').prop('disabled', false);
          }
        });
      });
      _export("html", html = "\n  <div class=\"container sheet\">\n    <h2 about=\"@\" rel=\"rdf:type\" data-template=\"v-ui:LabelTemplate\"></h2>\n    <hr />\n    <div class=\"row\">\n      <div class=\"col-md-6 col-xs-12\">\n        <em about=\"v-s:hasDelegationPurpose\" property=\"rdfs:label\"></em>\n        <div rel=\"v-s:hasDelegationPurpose\" data-template=\"v-ui:LabelTemplate\" class=\"view -edit search\"></div>\n        <veda-control data-type=\"link\" rel=\"v-s:hasDelegationPurpose\" class=\"-view edit search fulltext dropdown\" data-deleted=\"true\"></veda-control>\n      </div>\n    </div>\n    <div class=\"row\" id=\"official-control\">\n      <div class=\"col-md-6 col-xs-12\">\n        <div class=\"checkbox\">\n          <label>\n            <veda-control property=\"v-s:official\" data-type=\"boolean\"></veda-control>\n            <em about=\"v-s:official\" property=\"rdfs:label\"></em>\n          </label>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\" id=\"ignoreExclusive-control\">\n      <div class=\"col-md-6 col-xs-12\">\n        <div class=\"checkbox\">\n          <label>\n            <veda-control property=\"v-s:ignoreExclusive\" data-type=\"boolean\"></veda-control>\n            <em about=\"v-s:ignoreExclusive\" property=\"rdfs:label\"></em>\n          </label>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6 col-xs-12\">\n        <em about=\"v-s:delegator\" property=\"rdfs:label\"></em>\n        <div about=\"@\" id=\"delegator-value\" rel=\"v-s:delegator\" data-template=\"v-ui:LabelTemplate\" class=\"view edit -search\"></div>\n        <div rel=\"v-s:delegator\" data-template=\"v-ui:LabelTemplate\" class=\"-view -edit search\"></div>\n        <veda-control id=\"delegator-control\" data-type=\"link\" rel=\"v-s:delegator\" class=\"-view -edit search fulltext\" data-deleted=\"true\"></veda-control>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6 col-xs-12\">\n        <em about=\"v-s:delegatedPosition\" property=\"rdfs:label\"></em>\n        <div id=\"position-container\" rel=\"v-s:delegatedPosition\" data-template=\"v-ui:LabelTemplate\" class=\"view -edit search\"></div>\n        <veda-control id=\"position-control\" data-type=\"link\" rel=\"v-s:delegatedPosition\" class=\"-view -edit search fulltext\" data-deleted=\"true\"></veda-control>\n        <div id=\"positions\" class=\"-view edit -search\">\n          <div class=\"checkbox\">\n            <label>\n              <input class=\"input\" type=\"checkbox\" value=\"\" />\n              <span class=\"position-label\"></span>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6 col-xs-12\">\n        <em about=\"v-s:delegate\" property=\"rdfs:label\"></em>\n        <div rel=\"v-s:delegate\" data-template=\"v-ui:LabelTemplate\" class=\"view -edit search\"></div>\n        <veda-control data-type=\"link\" rel=\"v-s:delegate\" class=\"-view edit search fulltext\"></veda-control>\n      </div>\n    </div>\n    <div class=\"row\" id=\"custom-label\">\n      <div class=\"col-md-6 col-xs-12\">\n        <em about=\"rdfs:label\" property=\"rdfs:label\"></em>\n        <div property=\"rdfs:label\" class=\"view -edit -search\"></div>\n        <veda-control data-type=\"multilingualString\" property=\"rdfs:label\" class=\"-view edit search\"></veda-control>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-3 col-xs-6\">\n        <em about=\"v-s:dateFrom\" property=\"rdfs:label\"></em>\n        <div property=\"v-s:dateFrom\" class=\"view -edit search\"></div>\n        <veda-control property=\"v-s:dateFrom\" data-type=\"date\" class=\"-view edit search\"></veda-control>\n      </div>\n      <div class=\"col-md-3 col-xs-6\">\n        <em about=\"v-s:dateTo\" property=\"rdfs:label\"></em>\n        <div property=\"v-s:dateTo\" class=\"view -edit search\"></div>\n        <veda-control property=\"v-s:dateTo\" data-type=\"date\" class=\"-view edit search\"></veda-control>\n      </div>\n    </div>\n    <br />\n    <section class=\"view -edit -search\">\n      <h4 class=\"section-header\" about=\"v-s:createdAppointment\" property=\"rdfs:label\"></h4>\n      <div class=\"table-responsive\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th width=\"1%\"><span class=\"glyphicon glyphicon-search\"></span></th>\n              <th about=\"v-s:employee\" property=\"rdfs:label\"></th>\n              <th about=\"v-s:occupation\" property=\"rdfs:label\"></th>\n              <th about=\"v-s:dateFrom\" property=\"rdfs:label\"></th>\n              <th about=\"v-s:dateTo\" property=\"rdfs:label\"></th>\n              <th about=\"v-s:origin\" property=\"rdfs:label\"></th>\n              <th about=\"v-s:created\" property=\"rdfs:label\"></th>\n            </tr>\n          </thead>\n          <tbody rel=\"v-s:createdAppointment\">\n            <tr>\n              <td width=\"1%\"><a href=\"#/@\" class=\"glyphicon glyphicon-search\"></a></td>\n              <td rel=\"v-s:employee\" data-template=\"v-ui:LabelTemplate\"></td>\n              <td rel=\"v-s:occupation\" data-template=\"v-ui:LabelTemplate\"></td>\n              <td property=\"v-s:dateFrom\"></td>\n              <td property=\"v-s:dateTo\"></td>\n              <td property=\"v-s:origin\"></td>\n              <td property=\"v-s:created\"></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </section>\n    <br />\n    <div class=\"actions view edit -search\">\n      <span about=\"@\" data-template=\"v-ui:StandardButtonsTemplate\" data-embedded=\"true\" data-buttons=\"edit save cancel delete\"></span>\n    </div>\n  </div>\n");
    }
  };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyIkIiwiX2pxdWVyeSIsImRlZmF1bHQiLCJfanNDb21tb25WZWRhSnMiLCJ2ZWRhIiwiX2pzQ29tbW9uSW5kaXZpZHVhbF9tb2RlbEpzIiwiSW5kaXZpZHVhbE1vZGVsIiwiX2pzQ29tbW9uQmFja2VuZEpzIiwiQmFja2VuZCIsImV4ZWN1dGUiLCJfZXhwb3J0IiwicHJlIiwiaW5kaXZpZHVhbCIsInRlbXBsYXRlIiwiY29udGFpbmVyIiwibW9kZSIsImV4dHJhIiwiaGFzVmFsdWUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwicmVtb3ZlIiwicG9zdCIsIm9uIiwiZGVsZWdhdGVkUG9zaXRpb25IYW5kbGVyIiwiZXh0cmFjdEVtcGxveWVlIiwiZGVsZWdhdG9ySGFuZGxlciIsIm9uZSIsIm9mZiIsInBvc2l0aW9uVGVtcGxhdGUiLCJodG1sIiwiZW1wdHkiLCJlIiwiaWQiLCJwcm9wIiwicG9zaXRpb24iLCJpcyIsImNvbmNhdCIsImZpbHRlciIsIml0ZW0iLCJ2YWx1ZXMiLCJsZW5ndGgiLCJwcm9wZXJ0eV91cmkiLCJkZWxlZ2F0b3IiLCJxdWVyeVN0ciIsImRlbGVnYXRlZFBvc2l0aW9ucyIsInF1ZXJ5IiwidGlja2V0IiwidGhlbiIsInF1ZXJ5UmVzdWx0IiwiZ2V0X2luZGl2aWR1YWxzIiwicmVzdWx0IiwiYXBwb2ludG1lbnRzIiwicG9zaXRpb25zX2lkcyIsIm1hcCIsImFwcG9pbnRtZW50X2pzb24iLCJhcHBvaW50bWVudCIsInB1c2giLCJwb3NpdGlvbnMiLCJwb3NpdGlvbl9qc29uIiwidG1wbCIsImlucHV0IiwiZmluZCIsImxhYmVsIiwiaW5kZXhPZiIsInRleHQiLCJ0b1N0cmluZyIsImFwcGVuZFRvIiwiaXNOZXciLCJhdHRyIiwidXNlciIsInR5cGUiXSwic291cmNlcyI6WyIuLi8uLi9vbnRvbG9neS9nZW5lcmljLWZ1bmN0aW9uL3RlbXBsYXRlcy92LXNfUmVxdWVzdERlbGVnYXRpb25UZW1wbGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHZlZGEgZnJvbSAnL2pzL2NvbW1vbi92ZWRhLmpzJztcbmltcG9ydCBJbmRpdmlkdWFsTW9kZWwgZnJvbSAnL2pzL2NvbW1vbi9pbmRpdmlkdWFsX21vZGVsLmpzJztcbmltcG9ydCBCYWNrZW5kIGZyb20gJy9qcy9jb21tb24vYmFja2VuZC5qcyc7XG5cbmV4cG9ydCBjb25zdCBwcmUgPSBmdW5jdGlvbiAoaW5kaXZpZHVhbCwgdGVtcGxhdGUsIGNvbnRhaW5lciwgbW9kZSwgZXh0cmEpIHtcbiAgdGVtcGxhdGUgPSAkKHRlbXBsYXRlKTtcbiAgY29udGFpbmVyID0gJChjb250YWluZXIpO1xuXG4gIGlmIChpbmRpdmlkdWFsLmhhc1ZhbHVlKCdyZGY6dHlwZScsICd2LXM6UmVxdWVzdERlbGVnYXRpb25BZG1pbicpKSB7XG4gICAgJCgnI2RlbGVnYXRvci1jb250cm9sJywgdGVtcGxhdGUpLnJlbW92ZUNsYXNzKCctZWRpdCcpLmFkZENsYXNzKCdlZGl0Jyk7XG4gICAgJCgnI2RlbGVnYXRvci12YWx1ZScsIHRlbXBsYXRlKS5yZW1vdmVDbGFzcygnZWRpdCcpLmFkZENsYXNzKCctZWRpdCcpO1xuICAgICQoJyNwb3NpdGlvbi1jb250cm9sJywgdGVtcGxhdGUpLnJlbW92ZUNsYXNzKCctZWRpdCcpLmFkZENsYXNzKCdlZGl0Jyk7XG4gICAgJCgnI3Bvc2l0aW9uLWNvbnRhaW5lcicsIHRlbXBsYXRlKS5yZW1vdmVDbGFzcygnLWVkaXQnKS5hZGRDbGFzcygnZWRpdCcpO1xuICB9IGVsc2Uge1xuICAgICQoJyNjdXN0b20tbGFiZWwnLCB0ZW1wbGF0ZSkucmVtb3ZlKCk7XG4gICAgJCgnI2lnbm9yZUV4Y2x1c2l2ZS1jb250cm9sJywgdGVtcGxhdGUpLnJlbW92ZSgpO1xuICAgICQoJyNvZmZpY2lhbC1jb250cm9sJywgdGVtcGxhdGUpLnJlbW92ZSgpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcG9zdCA9IGZ1bmN0aW9uIChpbmRpdmlkdWFsLCB0ZW1wbGF0ZSwgY29udGFpbmVyLCBtb2RlLCBleHRyYSkge1xuICB0ZW1wbGF0ZSA9ICQodGVtcGxhdGUpO1xuICBjb250YWluZXIgPSAkKGNvbnRhaW5lcik7XG5cbiAgaW5kaXZpZHVhbC5vbigndi1zOmRlbGVnYXRlZFBvc2l0aW9uJywgZGVsZWdhdGVkUG9zaXRpb25IYW5kbGVyKTtcbiAgaW5kaXZpZHVhbC5vbigndi1zOmRlbGVnYXRvciB2LXM6ZGVsZWdhdGUnLCBleHRyYWN0RW1wbG95ZWUpO1xuICBpbmRpdmlkdWFsLm9uKCd2LXM6ZGVsZWdhdG9yJywgZGVsZWdhdG9ySGFuZGxlcik7XG4gIHRlbXBsYXRlLm9uZSgncmVtb3ZlJywgZnVuY3Rpb24gKCkge1xuICAgIGluZGl2aWR1YWwub2ZmKCd2LXM6ZGVsZWdhdGVkUG9zaXRpb24nLCBkZWxlZ2F0ZWRQb3NpdGlvbkhhbmRsZXIpO1xuICAgIGluZGl2aWR1YWwub2ZmKCd2LXM6ZGVsZWdhdG9yJywgZXh0cmFjdEVtcGxveWVlKTtcbiAgICBpbmRpdmlkdWFsLm9mZigndi1zOmRlbGVnYXRlJywgZXh0cmFjdEVtcGxveWVlKTtcbiAgICBpbmRpdmlkdWFsLm9mZigndi1zOmRlbGVnYXRvcicsIGRlbGVnYXRvckhhbmRsZXIpO1xuICB9KTtcbiAgZGVsZWdhdGVkUG9zaXRpb25IYW5kbGVyKGluZGl2aWR1YWxbJ3YtczpkZWxlZ2F0ZWRQb3NpdGlvbiddKTtcblxuICBjb25zdCBwb3NpdGlvblRlbXBsYXRlID0gJCgnI3Bvc2l0aW9ucycsIHRlbXBsYXRlKS5odG1sKCk7XG4gICQoJyNwb3NpdGlvbnMnLCB0ZW1wbGF0ZSlcbiAgICAuZW1wdHkoKVxuICAgIC5vbignY2xpY2snLCAnaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc3QgaWQgPSAkKHRoaXMpLnByb3AoJ2lkJyk7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBJbmRpdmlkdWFsTW9kZWwoaWQpO1xuICAgICAgaWYgKCQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgaW5kaXZpZHVhbFsndi1zOmRlbGVnYXRlZFBvc2l0aW9uJ10gPSBpbmRpdmlkdWFsWyd2LXM6ZGVsZWdhdGVkUG9zaXRpb24nXS5jb25jYXQocG9zaXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaXZpZHVhbFsndi1zOmRlbGVnYXRlZFBvc2l0aW9uJ10gPSBpbmRpdmlkdWFsWyd2LXM6ZGVsZWdhdGVkUG9zaXRpb24nXS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gaXRlbS5pZCAhPT0gcG9zaXRpb24uaWQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIGZ1bmN0aW9uIGRlbGVnYXRlZFBvc2l0aW9uSGFuZGxlciAodmFsdWVzKSB7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICQoJyNwb3NpdGlvbnMnLCB0ZW1wbGF0ZSkucmVtb3ZlQ2xhc3MoJ2hhcy1lcnJvcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcjcG9zaXRpb25zJywgdGVtcGxhdGUpLmFkZENsYXNzKCdoYXMtZXJyb3InKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZXh0cmFjdEVtcGxveWVlIChwcm9wZXJ0eV91cmksIHZhbHVlcykge1xuICAgIGlmICh2YWx1ZXMubGVuZ3RoICYmIHZhbHVlc1swXS5oYXNWYWx1ZSgncmRmOnR5cGUnLCAndi1zOkFwcG9pbnRtZW50JykpIHtcbiAgICAgIGluZGl2aWR1YWxbcHJvcGVydHlfdXJpXSA9IHZhbHVlc1swXVsndi1zOmVtcGxveWVlJ107XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlbGVnYXRvckhhbmRsZXIgKHZhbHVlcykge1xuICAgICQoJyNwb3NpdGlvbnMnLCB0ZW1wbGF0ZSkuZW1wdHkoKTtcbiAgICBpZiAodmFsdWVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZGVsZWdhdG9yID0gdmFsdWVzWzBdO1xuICAgICAgY29uc3QgcXVlcnlTdHIgPSBcIiggJ3JkZjp0eXBlJyA9PT0gJ3YtczpBcHBvaW50bWVudCcgJiYgJ3YtczplbXBsb3llZScgPT0gJ1wiICsgZGVsZWdhdG9yLmlkICsgXCInIClcIjtcbiAgICAgIGNvbnN0IGRlbGVnYXRlZFBvc2l0aW9ucyA9IFtdO1xuICAgICAgQmFja2VuZC5xdWVyeSh2ZWRhLnRpY2tldCwgcXVlcnlTdHIpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChxdWVyeVJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiBCYWNrZW5kLmdldF9pbmRpdmlkdWFscyh2ZWRhLnRpY2tldCwgcXVlcnlSZXN1bHQucmVzdWx0KTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGFwcG9pbnRtZW50cykge1xuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uc19pZHMgPSBhcHBvaW50bWVudHMubWFwKGZ1bmN0aW9uIChhcHBvaW50bWVudF9qc29uKSB7XG4gICAgICAgICAgICBjb25zdCBhcHBvaW50bWVudCA9IG5ldyBJbmRpdmlkdWFsTW9kZWwoYXBwb2ludG1lbnRfanNvbik7XG4gICAgICAgICAgICBpZiAoYXBwb2ludG1lbnQuaGFzVmFsdWUoJ3YtczpkYXRlRnJvbScpKSB7XG4gICAgICAgICAgICAgIGRlbGVnYXRlZFBvc2l0aW9ucy5wdXNoKGFwcG9pbnRtZW50Wyd2LXM6b2NjdXBhdGlvbiddWzBdLmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcHBvaW50bWVudFsndi1zOm9jY3VwYXRpb24nXVswXS5pZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gcG9zaXRpb25zX2lkcztcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvc2l0aW9uc19pZHMpIHtcbiAgICAgICAgICByZXR1cm4gQmFja2VuZC5nZXRfaW5kaXZpZHVhbHModmVkYS50aWNrZXQsIHBvc2l0aW9uc19pZHMpO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocG9zaXRpb25zKSB7XG4gICAgICAgICAgcG9zaXRpb25zLm1hcChmdW5jdGlvbiAocG9zaXRpb25fanNvbikge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgSW5kaXZpZHVhbE1vZGVsKHBvc2l0aW9uX2pzb24pO1xuICAgICAgICAgICAgY29uc3QgdG1wbCA9ICQocG9zaXRpb25UZW1wbGF0ZSk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHRtcGwuZmluZCgnLmlucHV0Jyk7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHRtcGwuZmluZCgnLnBvc2l0aW9uLWxhYmVsJyk7XG4gICAgICAgICAgICBpZiAoaW5kaXZpZHVhbC5oYXNWYWx1ZSgndi1zOmRlbGVnYXRlZFBvc2l0aW9uJywgcG9zaXRpb24pKSB7XG4gICAgICAgICAgICAgIGlucHV0LnByb3AoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbnB1dC5wcm9wKCdpZCcsIHBvc2l0aW9uLmlkKTtcblxuICAgICAgICAgICAgaWYgKGRlbGVnYXRlZFBvc2l0aW9ucy5pbmRleE9mKHBvc2l0aW9uLmlkKSA+PSAwKSB7XG4gICAgICAgICAgICAgIGxhYmVsLnRleHQocG9zaXRpb24udG9TdHJpbmcoKSArICcgKNC00LXQu9C10LPQuNGA0L7QstCw0L3QviknKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxhYmVsLnRleHQocG9zaXRpb24udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3ZpZXcnKSB7XG4gICAgICAgICAgICAgIGlucHV0LnByb3AoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRtcGwuYXBwZW5kVG8oJCgnI3Bvc2l0aW9ucycsIHRlbXBsYXRlKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpbmRpdmlkdWFsLmlzTmV3KCkgJiYgIWluZGl2aWR1YWwuaGFzVmFsdWUoJ3YtczpkZWxlZ2F0b3InKSAmJiB0ZW1wbGF0ZS5hdHRyKCdkYXRhLW1vZGUnKSAhPSAnc2VhcmNoJykge1xuICAgIGluZGl2aWR1YWxbJ3YtczpkZWxlZ2F0b3InXSA9IFt2ZWRhLnVzZXJdO1xuICB9IGVsc2UgaWYgKGluZGl2aWR1YWwuaXNOZXcoKSAmJiBpbmRpdmlkdWFsLmhhc1ZhbHVlKCd2LXM6ZGVsZWdhdG9yJykpIHtcbiAgICBkZWxlZ2F0b3JIYW5kbGVyKGluZGl2aWR1YWxbJ3YtczpkZWxlZ2F0b3InXSk7XG4gIH1cblxuICB0ZW1wbGF0ZS5vbigndmlldyBlZGl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50eXBlID09PSAndmlldycpIHtcbiAgICAgICQoJyNwb3NpdGlvbnMnLCB0ZW1wbGF0ZSkuZmluZCgnLmlucHV0JykucHJvcCgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnI3Bvc2l0aW9ucycsIHRlbXBsYXRlKS5maW5kKCcuaW5wdXQnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGh0bWwgPSBgXG4gIDxkaXYgY2xhc3M9XCJjb250YWluZXIgc2hlZXRcIj5cbiAgICA8aDIgYWJvdXQ9XCJAXCIgcmVsPVwicmRmOnR5cGVcIiBkYXRhLXRlbXBsYXRlPVwidi11aTpMYWJlbFRlbXBsYXRlXCI+PC9oMj5cbiAgICA8aHIgLz5cbiAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgY29sLXhzLTEyXCI+XG4gICAgICAgIDxlbSBhYm91dD1cInYtczpoYXNEZWxlZ2F0aW9uUHVycG9zZVwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvZW0+XG4gICAgICAgIDxkaXYgcmVsPVwidi1zOmhhc0RlbGVnYXRpb25QdXJwb3NlXCIgZGF0YS10ZW1wbGF0ZT1cInYtdWk6TGFiZWxUZW1wbGF0ZVwiIGNsYXNzPVwidmlldyAtZWRpdCBzZWFyY2hcIj48L2Rpdj5cbiAgICAgICAgPHZlZGEtY29udHJvbCBkYXRhLXR5cGU9XCJsaW5rXCIgcmVsPVwidi1zOmhhc0RlbGVnYXRpb25QdXJwb3NlXCIgY2xhc3M9XCItdmlldyBlZGl0IHNlYXJjaCBmdWxsdGV4dCBkcm9wZG93blwiIGRhdGEtZGVsZXRlZD1cInRydWVcIj48L3ZlZGEtY29udHJvbD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJyb3dcIiBpZD1cIm9mZmljaWFsLWNvbnRyb2xcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNiBjb2wteHMtMTJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrYm94XCI+XG4gICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgPHZlZGEtY29udHJvbCBwcm9wZXJ0eT1cInYtczpvZmZpY2lhbFwiIGRhdGEtdHlwZT1cImJvb2xlYW5cIj48L3ZlZGEtY29udHJvbD5cbiAgICAgICAgICAgIDxlbSBhYm91dD1cInYtczpvZmZpY2lhbFwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvZW0+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicm93XCIgaWQ9XCJpZ25vcmVFeGNsdXNpdmUtY29udHJvbFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC02IGNvbC14cy0xMlwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2tib3hcIj5cbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICA8dmVkYS1jb250cm9sIHByb3BlcnR5PVwidi1zOmlnbm9yZUV4Y2x1c2l2ZVwiIGRhdGEtdHlwZT1cImJvb2xlYW5cIj48L3ZlZGEtY29udHJvbD5cbiAgICAgICAgICAgIDxlbSBhYm91dD1cInYtczppZ25vcmVFeGNsdXNpdmVcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L2VtPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC02IGNvbC14cy0xMlwiPlxuICAgICAgICA8ZW0gYWJvdXQ9XCJ2LXM6ZGVsZWdhdG9yXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9lbT5cbiAgICAgICAgPGRpdiBhYm91dD1cIkBcIiBpZD1cImRlbGVnYXRvci12YWx1ZVwiIHJlbD1cInYtczpkZWxlZ2F0b3JcIiBkYXRhLXRlbXBsYXRlPVwidi11aTpMYWJlbFRlbXBsYXRlXCIgY2xhc3M9XCJ2aWV3IGVkaXQgLXNlYXJjaFwiPjwvZGl2PlxuICAgICAgICA8ZGl2IHJlbD1cInYtczpkZWxlZ2F0b3JcIiBkYXRhLXRlbXBsYXRlPVwidi11aTpMYWJlbFRlbXBsYXRlXCIgY2xhc3M9XCItdmlldyAtZWRpdCBzZWFyY2hcIj48L2Rpdj5cbiAgICAgICAgPHZlZGEtY29udHJvbCBpZD1cImRlbGVnYXRvci1jb250cm9sXCIgZGF0YS10eXBlPVwibGlua1wiIHJlbD1cInYtczpkZWxlZ2F0b3JcIiBjbGFzcz1cIi12aWV3IC1lZGl0IHNlYXJjaCBmdWxsdGV4dFwiIGRhdGEtZGVsZXRlZD1cInRydWVcIj48L3ZlZGEtY29udHJvbD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNiBjb2wteHMtMTJcIj5cbiAgICAgICAgPGVtIGFib3V0PVwidi1zOmRlbGVnYXRlZFBvc2l0aW9uXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9lbT5cbiAgICAgICAgPGRpdiBpZD1cInBvc2l0aW9uLWNvbnRhaW5lclwiIHJlbD1cInYtczpkZWxlZ2F0ZWRQb3NpdGlvblwiIGRhdGEtdGVtcGxhdGU9XCJ2LXVpOkxhYmVsVGVtcGxhdGVcIiBjbGFzcz1cInZpZXcgLWVkaXQgc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgIDx2ZWRhLWNvbnRyb2wgaWQ9XCJwb3NpdGlvbi1jb250cm9sXCIgZGF0YS10eXBlPVwibGlua1wiIHJlbD1cInYtczpkZWxlZ2F0ZWRQb3NpdGlvblwiIGNsYXNzPVwiLXZpZXcgLWVkaXQgc2VhcmNoIGZ1bGx0ZXh0XCIgZGF0YS1kZWxldGVkPVwidHJ1ZVwiPjwvdmVkYS1jb250cm9sPlxuICAgICAgICA8ZGl2IGlkPVwicG9zaXRpb25zXCIgY2xhc3M9XCItdmlldyBlZGl0IC1zZWFyY2hcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hlY2tib3hcIj5cbiAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiaW5wdXRcIiB0eXBlPVwiY2hlY2tib3hcIiB2YWx1ZT1cIlwiIC8+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicG9zaXRpb24tbGFiZWxcIj48L3NwYW4+XG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNiBjb2wteHMtMTJcIj5cbiAgICAgICAgPGVtIGFib3V0PVwidi1zOmRlbGVnYXRlXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9lbT5cbiAgICAgICAgPGRpdiByZWw9XCJ2LXM6ZGVsZWdhdGVcIiBkYXRhLXRlbXBsYXRlPVwidi11aTpMYWJlbFRlbXBsYXRlXCIgY2xhc3M9XCJ2aWV3IC1lZGl0IHNlYXJjaFwiPjwvZGl2PlxuICAgICAgICA8dmVkYS1jb250cm9sIGRhdGEtdHlwZT1cImxpbmtcIiByZWw9XCJ2LXM6ZGVsZWdhdGVcIiBjbGFzcz1cIi12aWV3IGVkaXQgc2VhcmNoIGZ1bGx0ZXh0XCI+PC92ZWRhLWNvbnRyb2w+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicm93XCIgaWQ9XCJjdXN0b20tbGFiZWxcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNiBjb2wteHMtMTJcIj5cbiAgICAgICAgPGVtIGFib3V0PVwicmRmczpsYWJlbFwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvZW0+XG4gICAgICAgIDxkaXYgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCIgY2xhc3M9XCJ2aWV3IC1lZGl0IC1zZWFyY2hcIj48L2Rpdj5cbiAgICAgICAgPHZlZGEtY29udHJvbCBkYXRhLXR5cGU9XCJtdWx0aWxpbmd1YWxTdHJpbmdcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIiBjbGFzcz1cIi12aWV3IGVkaXQgc2VhcmNoXCI+PC92ZWRhLWNvbnRyb2w+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTMgY29sLXhzLTZcIj5cbiAgICAgICAgPGVtIGFib3V0PVwidi1zOmRhdGVGcm9tXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9lbT5cbiAgICAgICAgPGRpdiBwcm9wZXJ0eT1cInYtczpkYXRlRnJvbVwiIGNsYXNzPVwidmlldyAtZWRpdCBzZWFyY2hcIj48L2Rpdj5cbiAgICAgICAgPHZlZGEtY29udHJvbCBwcm9wZXJ0eT1cInYtczpkYXRlRnJvbVwiIGRhdGEtdHlwZT1cImRhdGVcIiBjbGFzcz1cIi12aWV3IGVkaXQgc2VhcmNoXCI+PC92ZWRhLWNvbnRyb2w+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtMyBjb2wteHMtNlwiPlxuICAgICAgICA8ZW0gYWJvdXQ9XCJ2LXM6ZGF0ZVRvXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9lbT5cbiAgICAgICAgPGRpdiBwcm9wZXJ0eT1cInYtczpkYXRlVG9cIiBjbGFzcz1cInZpZXcgLWVkaXQgc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgIDx2ZWRhLWNvbnRyb2wgcHJvcGVydHk9XCJ2LXM6ZGF0ZVRvXCIgZGF0YS10eXBlPVwiZGF0ZVwiIGNsYXNzPVwiLXZpZXcgZWRpdCBzZWFyY2hcIj48L3ZlZGEtY29udHJvbD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxiciAvPlxuICAgIDxzZWN0aW9uIGNsYXNzPVwidmlldyAtZWRpdCAtc2VhcmNoXCI+XG4gICAgICA8aDQgY2xhc3M9XCJzZWN0aW9uLWhlYWRlclwiIGFib3V0PVwidi1zOmNyZWF0ZWRBcHBvaW50bWVudFwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvaDQ+XG4gICAgICA8ZGl2IGNsYXNzPVwidGFibGUtcmVzcG9uc2l2ZVwiPlxuICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZVwiPlxuICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgPHRoIHdpZHRoPVwiMSVcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tc2VhcmNoXCI+PC9zcGFuPjwvdGg+XG4gICAgICAgICAgICAgIDx0aCBhYm91dD1cInYtczplbXBsb3llZVwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvdGg+XG4gICAgICAgICAgICAgIDx0aCBhYm91dD1cInYtczpvY2N1cGF0aW9uXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC90aD5cbiAgICAgICAgICAgICAgPHRoIGFib3V0PVwidi1zOmRhdGVGcm9tXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC90aD5cbiAgICAgICAgICAgICAgPHRoIGFib3V0PVwidi1zOmRhdGVUb1wiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvdGg+XG4gICAgICAgICAgICAgIDx0aCBhYm91dD1cInYtczpvcmlnaW5cIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L3RoPlxuICAgICAgICAgICAgICA8dGggYWJvdXQ9XCJ2LXM6Y3JlYXRlZFwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvdGg+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgPHRib2R5IHJlbD1cInYtczpjcmVhdGVkQXBwb2ludG1lbnRcIj5cbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgPHRkIHdpZHRoPVwiMSVcIj48YSBocmVmPVwiIy9AXCIgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXNlYXJjaFwiPjwvYT48L3RkPlxuICAgICAgICAgICAgICA8dGQgcmVsPVwidi1zOmVtcGxveWVlXCIgZGF0YS10ZW1wbGF0ZT1cInYtdWk6TGFiZWxUZW1wbGF0ZVwiPjwvdGQ+XG4gICAgICAgICAgICAgIDx0ZCByZWw9XCJ2LXM6b2NjdXBhdGlvblwiIGRhdGEtdGVtcGxhdGU9XCJ2LXVpOkxhYmVsVGVtcGxhdGVcIj48L3RkPlxuICAgICAgICAgICAgICA8dGQgcHJvcGVydHk9XCJ2LXM6ZGF0ZUZyb21cIj48L3RkPlxuICAgICAgICAgICAgICA8dGQgcHJvcGVydHk9XCJ2LXM6ZGF0ZVRvXCI+PC90ZD5cbiAgICAgICAgICAgICAgPHRkIHByb3BlcnR5PVwidi1zOm9yaWdpblwiPjwvdGQ+XG4gICAgICAgICAgICAgIDx0ZCBwcm9wZXJ0eT1cInYtczpjcmVhdGVkXCI+PC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgIDwvc2VjdGlvbj5cbiAgICA8YnIgLz5cbiAgICA8ZGl2IGNsYXNzPVwiYWN0aW9ucyB2aWV3IGVkaXQgLXNlYXJjaFwiPlxuICAgICAgPHNwYW4gYWJvdXQ9XCJAXCIgZGF0YS10ZW1wbGF0ZT1cInYtdWk6U3RhbmRhcmRCdXR0b25zVGVtcGxhdGVcIiBkYXRhLWVtYmVkZGVkPVwidHJ1ZVwiIGRhdGEtYnV0dG9ucz1cImVkaXQgc2F2ZSBjYW5j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