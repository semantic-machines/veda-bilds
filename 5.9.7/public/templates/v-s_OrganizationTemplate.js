"use strict";

System.register(["/js/browser/util.js", "jquery", "/js/common/veda.js", "/js/common/individual_model.js", "/js/common/backend.js"], function (_export, _context) {
  "use strict";

  var BrowserUtil, $, veda, IndividualModel, Backend, pre, post, html;
  return {
    setters: [function (_jsBrowserUtilJs) {
      BrowserUtil = _jsBrowserUtilJs.default;
    }, function (_jquery) {
      $ = _jquery.default;
    }, function (_jsCommonVedaJs) {
      veda = _jsCommonVedaJs.default;
    }, function (_jsCommonIndividual_modelJs) {
      IndividualModel = _jsCommonIndividual_modelJs.default;
    }, function (_jsCommonBackendJs) {
      Backend = _jsCommonBackendJs.default;
    }],
    execute: function () {
      _export("pre", pre = function pre(individual, template, container, mode, extra) {
        template = $(template);
        container = $(container);
        var _class = new IndividualModel('v-s:Subsidiary');
        Promise.all([_class.rights, individual.rights]).then(function (rights) {
          var class_rights = rights[0];
          var individual_rights = rights[1];
          if (!class_rights.hasValue('v-s:canCreate', true) || !individual_rights.hasValue('v-s:canUpdate', true)) {
            $('#add-subsidiary', template).remove();
          }
        }).catch(function (error) {
          console.error('Rights failed');
        });
        var prevTaxId = individual.hasValue('v-s:taxId') && individual['v-s:taxId'][0].toString();

        // Validation
        template.on('validate', function () {
          var result = {
            state: true
          };
          var regexp;
          if (individual.hasValue('v-s:hasClassifierCountry', 'd:Country_RUS') && individual.hasValue('v-s:hasClassifierLegalForm', 'd:OKOPF_50102')) {
            regexp = /^([0-9]{12})$/gi;
          } else if (individual.hasValue('v-s:hasClassifierCountry', 'd:Country_RUS')) {
            regexp = /^([0-9]{10})$/gi;
          } else if (individual.hasValue('v-s:hasClassifierCountry', 'd:Country_NLD')) {
            regexp = /^[A-Z]{1,3}[0-9]{9}[B]{1}[0-9]{2}$/gi;
          } else if (individual.hasValue('v-s:hasClassifierCountry')) {
            regexp = /^[A-Z]{1,3}[0-9]{4,}$/gi;
          }
          if (!individual.hasValue('v-s:taxId')) {
            result['v-s:taxId'] = {
              state: false,
              cause: ['v-ui:minCardinality']
            };
          } else {
            // Check regexp
            var taxId = individual['v-s:taxId'][0].toString();
            if (taxId != '0000000000' && taxId != '000000000000') {
              result['v-s:taxId'] = {
                state: regexp.test(taxId),
                cause: ['v-ui:regexp']
              };
            } else {
              result['v-s:taxId'] = {
                state: false,
                cause: ['v-s:ForSafeTaxId']
              };
            }

            // Check unique
            var newTaxId = individual.hasValue('v-s:taxId') && individual['v-s:taxId'][0].toString();
            if (prevTaxId !== newTaxId) {
              prevTaxId = newTaxId;
            }
            if (result['v-s:taxId'].state) {
              Backend.query(veda.ticket, "'rdf:type'==='v-s:Organization' && 'v-s:taxId'=='" + taxId + "'").then(function (queryResult) {
                result['v-s:taxId'] = {
                  state: !queryResult.result.length || queryResult.result[0] === individual.id,
                  cause: ['v-s:NonUniqueTaxId']
                };
                template[0].dispatchEvent(new CustomEvent('validated', {
                  detail: result
                }));
              });
            }
          }
          // Если значение поля v-s:hasClassifierCountry=d:Country_RUS то поле v-s:hasClassifierLegalForm Обязательное
          if (individual.hasValue('v-s:hasClassifierCountry', 'd:Country_RUS')) {
            result['v-s:hasClassifierLegalForm'] = {
              state: individual.hasValue('v-s:hasClassifierLegalForm'),
              cause: ['v-ui:minCardinality']
            };
          }
          // Если значение поля v-s:hasClassifierCountry=d:Country_RUS и поле v-s:hasClassifierLegalForm=d:OKOPF_50102 то поле v-s:taxRegistrationCause должно быть обязательным.
          if (individual.hasValue('v-s:hasClassifierCountry', 'd:Country_RUS') && !individual.hasValue('v-s:hasClassifierLegalForm', 'd:OKOPF_50102') && !individual.hasValue('v-s:hasClassifierLegalForm', 'd:OKOPF_50000')) {
            result['v-s:taxRegistrationCause'] = {
              state: /^[0-9]{9}$/.test(individual['v-s:taxRegistrationCause'][0]),
              cause: ['v-ui:regexp']
            };
          }
          template[0].dispatchEvent(new CustomEvent('validated', {
            detail: result
          }));
        });
      });
      _export("post", post = function post(individual, template, container, mode, extra) {
        template = $(template);
        container = $(container);

        // Генерация Uri
        BrowserUtil.registerHandler(individual, 'beforeSave', template, function () {
          var shortLabel = individual['v-s:hasClassifierCountry'][0]['v-s:shortLabel'];
          var taxId = individual['v-s:taxId'];
          if (individual.hasValue('v-s:hasClassifierCountry', 'd:Country_RUS') && individual.isNew()) {
            individual.id = 'd:org_' + shortLabel + taxId;
          } else if (individual.isNew()) {
            individual.id = 'd:org_' + taxId;
          }
        });
        $('#add-subsidiary', template).click(function () {
          var modal = $('#notification-modal-template').html();
          modal = $(modal);
          modal.modal({
            show: false
          });
          $('body').append(modal);
          modal.modal('show');
          template.one('remove', function () {
            modal.modal('hide').remove();
          });
          var cntr = $('.modal-body', modal);
          var _class = new IndividualModel('v-s:Subsidiary');
          var subsidiary = new IndividualModel();
          var tmpl = new IndividualModel('v-s:SubsidiaryTemplate');
          subsidiary['rdf:type'] = [_class];
          subsidiary['v-s:backwardTarget'] = [individual];
          subsidiary['v-s:backwardProperty'] = [new IndividualModel('v-s:hasSubsidiary')];
          subsidiary['v-s:canRead'] = [true];
          subsidiary.present(cntr, tmpl, 'edit');
          subsidiary.one('beforeReset', function () {
            modal.modal('hide').remove();
          });
          subsidiary.one('afterSave', function () {
            modal.modal('hide').remove();
          });
        });
      });
      _export("html", html = "\n<div>\n  <div class=\"container sheet\">\n    <h2>\n      <span about=\"v-s:Organization\" property=\"rdfs:label\"></span>\n      <small about=\"@\" property=\"rdfs:label\"></small>\n    </h2>\n    <hr>\n    <div class=\"row\">\n      <div class=\"col-md-8\">\n        <em about=\"rdfs:label\" property=\"rdfs:label\"></em>\n        <div property=\"rdfs:label\" class=\"view -edit -search\"></div>\n        <veda-control data-type=\"string\" property=\"rdfs:label\" class=\"-view edit search\"></veda-control>\n      </div>\n      <div class=\"col-md-8\">\n        <em about=\"v-s:FullNameOrgBundle\" property=\"rdfs:label\"></em>\n        <div property=\"v-s:title\" class=\"view -edit -search\"></div>\n        <veda-control data-type=\"string\" property=\"v-s:title\" class=\"-view edit search\"></veda-control>\n      </div>\n    </div>\n    <hr class=\"view -edit -search\">\n    <div class=\"row\">\n      <div class=\"col-md-4\">\n        <em about=\"v-s:hasClassifierCountry\" property=\"rdfs:label\"></em>\n        <div rel=\"v-s:hasClassifierCountry\" class=\"view -edit search\" data-template=\"v-ui:LabelTemplate\"></div>\n        <veda-control data-type=\"link\" rel=\"v-s:hasClassifierCountry\" class=\"-view edit search fulltext\" data-template=\"{@.v-s:shortLabel} | {@.rdfs:label}\"></veda-control>\n      </div>\n      <div class=\"col-md-8\">\n        <em about=\"v-s:hasClassifierLegalForm\" property=\"rdfs:label\"></em>\n        <div rel=\"v-s:hasClassifierLegalForm\" class=\"view -edit search\" data-template=\"v-ui:LabelTemplate\"></div>\n        <veda-control data-type=\"link\" rel=\"v-s:hasClassifierLegalForm\" class=\"-view edit search fulltext\"></veda-control>\n      </div>\n    </div>\n    <hr class=\"view -edit -search\">\n    <div class=\"row\">\n      <div class=\"col-sm-4\">\n        <em about=\"v-s:taxId\" property=\"rdfs:label\"></em>\n        <div property=\"v-s:taxId\" class=\"view -edit -search\"></div>\n        <veda-control data-type=\"string\" property=\"v-s:taxId\" class=\"-view edit search\"></veda-control>\n      </div>\n      <div class=\"col-sm-4\">\n        <em about=\"v-s:taxRegistrationCause\" property=\"rdfs:label\"></em>\n        <div property=\"v-s:taxRegistrationCause\" class=\"view -edit -search\"></div>\n        <veda-control data-type=\"string\" property=\"v-s:taxRegistrationCause\" class=\"-view edit search\"></veda-control>\n      </div>\n      <div class=\"col-sm-4\">\n        <em about=\"v-s:taxRegistrationNumber\" property=\"rdfs:label\"></em>\n        <div property=\"v-s:taxRegistrationNumber\" class=\"view -edit -search\"></div>\n        <veda-control data-type=\"string\" property=\"v-s:taxRegistrationNumber\" class=\"-view edit search\"></veda-control>\n      </div>\n    </div>\n\n    <hr class=\"view -edit -search\">\n\n    <div class=\"row\">\n      <div class=\"col-sm-4\">\n        <em about=\"v-s:legalAddress\" property=\"rdfs:label\"></em>\n        <div property=\"v-s:legalAddress\" class=\"view -edit -search\"></div>\n        <veda-control data-type=\"text\" rows=\"3\" property=\"v-s:legalAddress\" class=\"-view edit search\"></veda-control>\n      </div>\n      <div class=\"col-sm-4\">\n        <em about=\"v-s:postalAddress\" property=\"rdfs:label\"></em>\n        <div property=\"v-s:postalAddress\" class=\"view -edit -search\"></div>\n        <veda-control data-type=\"text\" rows=\"3\" property=\"v-s:postalAddress\" class=\"-view edit search\"></veda-control>\n      </div>\n    </div>\n    <hr class=\"view -edit -search\">\n    <em about=\"v-s:LegalEntityExistencePeriodBundle\" property=\"rdfs:label\"></em>\n    <div class=\"row\">\n      <div class=\"col-md-4\">\n        <div property=\"v-s:dateFromFact\" class=\"view -edit -search\"></div>\n        <veda-control property=\"v-s:dateFromFact\" data-type=\"date\" class=\"-view edit search\"></veda-control>\n      </div>\n      <div class=\"col-md-4\">\n        <div property=\"v-s:dateToFact\" class=\"view -edit -search\"></div>\n        <veda-control property=\"v-s:dateToFact\" data-type=\"date\" class=\"-view edit search\"></veda-control>\n      </div>\n    </div>\n    <em about=\"v-s:hasSubsidiary\" property=\"rdfs:label\"></em>\n    <table class=\"table table-condensed table-bordered\">\n      <thead>\n        <tr class=\"view -edit -search active\">\n          <th width=\"1%\"><span class=\"glyphicon glyphicon-search\"></th>\n          <th about=\"rdfs:label\" property=\"rdfs:label\"></th>\n          <th about=\"v-s:taxRegistrationCause\" property=\"rdfs:label\"></th>\n          <th about=\"v-s:postalAddress\" property=\"rdfs:label\"></th>\n        </tr>\n      </thead>\n      <tbody rel=\"v-s:hasSubsidiary\" data-embedded=\"true\">\n        <tr>\n          <td about=\"@\" data-template=\"v-ui:IconModalTemplate\"></td>\n          <td>\n            <div property=\"rdfs:label\" class=\"view -edit -search\"></div>\n            <veda-control property=\"rdfs:label\" data-type=\"string\" class=\"-view edit search\"></veda-control>\n          </td>\n          <td>\n            <div property=\"v-s:taxRegistrationCause\" class=\"view -edit -search\"></div>\n            <veda-control property=\"v-s:taxRegistrationCause\" data-type=\"string\" class=\"-view edit search\"></veda-control>\n          </td>\n          <td>\n            <div property=\"v-s:postalAddress\" class=\"view -edit -search\"></div>\n            <veda-control property=\"v-s:postalAddress\" data-type=\"string\" class=\"-view edit search\"></veda-control>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div class=\"view -edit -search\">\n      <button class=\"btn btn-success\" id=\"add-subsidiary\">\n        <span class=\"glyphicon glyphicon-zoom-in\"></span>\n        <span about=\"v-s:AddSubsidiary\" property=\"rdfs:label\"></span>\n      </button>\n    </div>\n\n    <em about=\"v-s:HeadOrganization\" property=\"rdfs:label\"></em>\n    <div rel=\"v-s:parentUnit\" class=\"view -edit -search\" data-template=\"v-ui:LabelTemplate\"></div>\n    <veda-control data-type=\"link\" rel=\"v-s:parentUnit\" class=\"-view edit search fulltext\"></veda-control>\n    <hr class=\"view -edit -search\">\n\n    <div about=\"@\" data-template=\"v-ui:SystemPropertiesTemplate\" data-embedded=\"true\"></div>\n    <br>\n    <!-- BUTTONS -->\n    <div class=\"actions\">\n      <span about=\"@\" data-template=\"v-ui:StandardButtonsTemplate\" data-embedded=\"true\" data-buttons=\"edit save cancel delete journal\"></span>\n    </div>\n  </div>\n  <div about=\"@\" class=\"container sheet view edit -search\" data-template=\"v-s:LinksTemplate\" data-embedded=\"true\"></div>\n  <div about=\"@\" class=\"container sheet view -edit -search\" data-template=\"v-s:CommentsTemplate\"></div>\n</div>\n");
    }
  };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCcm93c2VyVXRpbCIsIl9qc0Jyb3dzZXJVdGlsSnMiLCJkZWZhdWx0IiwiX2pxdWVyeSIsIiQiLCJfanNDb21tb25WZWRhSnMiLCJ2ZWRhIiwiX2pzQ29tbW9uSW5kaXZpZHVhbF9tb2RlbEpzIiwiSW5kaXZpZHVhbE1vZGVsIiwiX2pzQ29tbW9uQmFja2VuZEpzIiwiQmFja2VuZCIsImV4ZWN1dGUiLCJfZXhwb3J0IiwicHJlIiwiaW5kaXZpZHVhbCIsInRlbXBsYXRlIiwiY29udGFpbmVyIiwibW9kZSIsImV4dHJhIiwiX2NsYXNzIiwiUHJvbWlzZSIsImFsbCIsInJpZ2h0cyIsInRoZW4iLCJjbGFzc19yaWdodHMiLCJpbmRpdmlkdWFsX3JpZ2h0cyIsImhhc1ZhbHVlIiwicmVtb3ZlIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJwcmV2VGF4SWQiLCJ0b1N0cmluZyIsIm9uIiwicmVzdWx0Iiwic3RhdGUiLCJyZWdleHAiLCJjYXVzZSIsInRheElkIiwidGVzdCIsIm5ld1RheElkIiwicXVlcnkiLCJ0aWNrZXQiLCJxdWVyeVJlc3VsdCIsImxlbmd0aCIsImlkIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwicG9zdCIsInJlZ2lzdGVySGFuZGxlciIsInNob3J0TGFiZWwiLCJpc05ldyIsImNsaWNrIiwibW9kYWwiLCJodG1sIiwic2hvdyIsImFwcGVuZCIsIm9uZSIsImNudHIiLCJzdWJzaWRpYXJ5IiwidG1wbCIsInByZXNlbnQiXSwic291cmNlcyI6WyIuLi8uLi9vbnRvbG9neS9hYnN0cmFjdC1kaWN0aW9uYXJ5L29yZ2FuaXphdGlvbi90ZW1wbGF0ZXMvdi1zX09yZ2FuaXphdGlvblRlbXBsYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCcm93c2VyVXRpbCBmcm9tICcvanMvYnJvd3Nlci91dGlsLmpzJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgdmVkYSBmcm9tICcvanMvY29tbW9uL3ZlZGEuanMnO1xuaW1wb3J0IEluZGl2aWR1YWxNb2RlbCBmcm9tICcvanMvY29tbW9uL2luZGl2aWR1YWxfbW9kZWwuanMnO1xuaW1wb3J0IEJhY2tlbmQgZnJvbSAnL2pzL2NvbW1vbi9iYWNrZW5kLmpzJztcblxuZXhwb3J0IGNvbnN0IHByZSA9IGZ1bmN0aW9uIChpbmRpdmlkdWFsLCB0ZW1wbGF0ZSwgY29udGFpbmVyLCBtb2RlLCBleHRyYSkge1xuICB0ZW1wbGF0ZSA9ICQodGVtcGxhdGUpO1xuICBjb250YWluZXIgPSAkKGNvbnRhaW5lcik7XG5cbiAgY29uc3QgX2NsYXNzID0gbmV3IEluZGl2aWR1YWxNb2RlbCgndi1zOlN1YnNpZGlhcnknKTtcblxuICBQcm9taXNlLmFsbChbX2NsYXNzLnJpZ2h0cywgaW5kaXZpZHVhbC5yaWdodHNdKVxuICAgIC50aGVuKGZ1bmN0aW9uIChyaWdodHMpIHtcbiAgICAgIGNvbnN0IGNsYXNzX3JpZ2h0cyA9IHJpZ2h0c1swXTtcbiAgICAgIGNvbnN0IGluZGl2aWR1YWxfcmlnaHRzID0gcmlnaHRzWzFdO1xuICAgICAgaWYgKCFjbGFzc19yaWdodHMuaGFzVmFsdWUoJ3YtczpjYW5DcmVhdGUnLCB0cnVlKSB8fCAhaW5kaXZpZHVhbF9yaWdodHMuaGFzVmFsdWUoJ3YtczpjYW5VcGRhdGUnLCB0cnVlKSkge1xuICAgICAgICAkKCcjYWRkLXN1YnNpZGlhcnknLCB0ZW1wbGF0ZSkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdSaWdodHMgZmFpbGVkJyk7XG4gICAgfSk7XG5cbiAgbGV0IHByZXZUYXhJZCA9IGluZGl2aWR1YWwuaGFzVmFsdWUoJ3Ytczp0YXhJZCcpICYmIGluZGl2aWR1YWxbJ3Ytczp0YXhJZCddWzBdLnRvU3RyaW5nKCk7XG5cbiAgLy8gVmFsaWRhdGlvblxuICB0ZW1wbGF0ZS5vbigndmFsaWRhdGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge3N0YXRlOiB0cnVlfTtcbiAgICBsZXQgcmVnZXhwO1xuICAgIGlmIChpbmRpdmlkdWFsLmhhc1ZhbHVlKCd2LXM6aGFzQ2xhc3NpZmllckNvdW50cnknLCAnZDpDb3VudHJ5X1JVUycpICYmIGluZGl2aWR1YWwuaGFzVmFsdWUoJ3YtczpoYXNDbGFzc2lmaWVyTGVnYWxGb3JtJywgJ2Q6T0tPUEZfNTAxMDInKSkge1xuICAgICAgcmVnZXhwID0gL14oWzAtOV17MTJ9KSQvZ2k7XG4gICAgfSBlbHNlIGlmIChpbmRpdmlkdWFsLmhhc1ZhbHVlKCd2LXM6aGFzQ2xhc3NpZmllckNvdW50cnknLCAnZDpDb3VudHJ5X1JVUycpKSB7XG4gICAgICByZWdleHAgPSAvXihbMC05XXsxMH0pJC9naTtcbiAgICB9IGVsc2UgaWYgKGluZGl2aWR1YWwuaGFzVmFsdWUoJ3YtczpoYXNDbGFzc2lmaWVyQ291bnRyeScsICdkOkNvdW50cnlfTkxEJykpIHtcbiAgICAgIHJlZ2V4cCA9IC9eW0EtWl17MSwzfVswLTldezl9W0JdezF9WzAtOV17Mn0kL2dpO1xuICAgIH0gZWxzZSBpZiAoaW5kaXZpZHVhbC5oYXNWYWx1ZSgndi1zOmhhc0NsYXNzaWZpZXJDb3VudHJ5JykpIHtcbiAgICAgIHJlZ2V4cCA9IC9eW0EtWl17MSwzfVswLTldezQsfSQvZ2k7XG4gICAgfVxuICAgIGlmICghaW5kaXZpZHVhbC5oYXNWYWx1ZSgndi1zOnRheElkJykpIHtcbiAgICAgIHJlc3VsdFsndi1zOnRheElkJ10gPSB7XG4gICAgICAgIHN0YXRlOiBmYWxzZSxcbiAgICAgICAgY2F1c2U6IFsndi11aTptaW5DYXJkaW5hbGl0eSddLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2hlY2sgcmVnZXhwXG4gICAgICBjb25zdCB0YXhJZCA9IGluZGl2aWR1YWxbJ3Ytczp0YXhJZCddWzBdLnRvU3RyaW5nKCk7XG4gICAgICBpZiAodGF4SWQgIT0gJzAwMDAwMDAwMDAnICYmIHRheElkICE9ICcwMDAwMDAwMDAwMDAnKSB7XG4gICAgICAgIHJlc3VsdFsndi1zOnRheElkJ10gPSB7XG4gICAgICAgICAgc3RhdGU6IHJlZ2V4cC50ZXN0KHRheElkKSxcbiAgICAgICAgICBjYXVzZTogWyd2LXVpOnJlZ2V4cCddLFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0Wyd2LXM6dGF4SWQnXSA9IHtcbiAgICAgICAgICBzdGF0ZTogZmFsc2UsXG4gICAgICAgICAgY2F1c2U6IFsndi1zOkZvclNhZmVUYXhJZCddLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayB1bmlxdWVcbiAgICAgIGNvbnN0IG5ld1RheElkID0gaW5kaXZpZHVhbC5oYXNWYWx1ZSgndi1zOnRheElkJykgJiYgaW5kaXZpZHVhbFsndi1zOnRheElkJ11bMF0udG9TdHJpbmcoKTtcbiAgICAgIGlmIChwcmV2VGF4SWQgIT09IG5ld1RheElkKSB7XG4gICAgICAgIHByZXZUYXhJZCA9IG5ld1RheElkO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdFsndi1zOnRheElkJ10uc3RhdGUpIHtcbiAgICAgICAgQmFja2VuZC5xdWVyeSh2ZWRhLnRpY2tldCwgXCIncmRmOnR5cGUnPT09J3YtczpPcmdhbml6YXRpb24nICYmICd2LXM6dGF4SWQnPT0nXCIgKyB0YXhJZCArIFwiJ1wiKS50aGVuKGZ1bmN0aW9uIChxdWVyeVJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdFsndi1zOnRheElkJ10gPSB7XG4gICAgICAgICAgICBzdGF0ZTogIXF1ZXJ5UmVzdWx0LnJlc3VsdC5sZW5ndGggfHwgcXVlcnlSZXN1bHQucmVzdWx0WzBdID09PSBpbmRpdmlkdWFsLmlkLFxuICAgICAgICAgICAgY2F1c2U6IFsndi1zOk5vblVuaXF1ZVRheElkJ10sXG4gICAgICAgICAgfTtcbiAgICAgICAgICB0ZW1wbGF0ZVswXS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndmFsaWRhdGVkJywge2RldGFpbDogcmVzdWx0fSkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8g0JXRgdC70Lgg0LfQvdCw0YfQtdC90LjQtSDQv9C+0LvRjyB2LXM6aGFzQ2xhc3NpZmllckNvdW50cnk9ZDpDb3VudHJ5X1JVUyDRgtC+INC/0L7Qu9C1IHYtczpoYXNDbGFzc2lmaWVyTGVnYWxGb3JtINCe0LHRj9C30LDRgtC10LvRjNC90L7QtVxuICAgIGlmIChpbmRpdmlkdWFsLmhhc1ZhbHVlKCd2LXM6aGFzQ2xhc3NpZmllckNvdW50cnknLCAnZDpDb3VudHJ5X1JVUycpKSB7XG4gICAgICByZXN1bHRbJ3YtczpoYXNDbGFzc2lmaWVyTGVnYWxGb3JtJ10gPSB7XG4gICAgICAgIHN0YXRlOiBpbmRpdmlkdWFsLmhhc1ZhbHVlKCd2LXM6aGFzQ2xhc3NpZmllckxlZ2FsRm9ybScpLFxuICAgICAgICBjYXVzZTogWyd2LXVpOm1pbkNhcmRpbmFsaXR5J10sXG4gICAgICB9O1xuICAgIH1cbiAgICAvLyDQldGB0LvQuCDQt9C90LDRh9C10L3QuNC1INC/0L7Qu9GPIHYtczpoYXNDbGFzc2lmaWVyQ291bnRyeT1kOkNvdW50cnlfUlVTINC4INC/0L7Qu9C1IHYtczpoYXNDbGFzc2lmaWVyTGVnYWxGb3JtPWQ6T0tPUEZfNTAxMDIg0YLQviDQv9C+0LvQtSB2LXM6dGF4UmVnaXN0cmF0aW9uQ2F1c2Ug0LTQvtC70LbQvdC+INCx0YvRgtGMINC+0LHRj9C30LDRgtC10LvRjNC90YvQvC5cbiAgICBpZiAoXG4gICAgICBpbmRpdmlkdWFsLmhhc1ZhbHVlKCd2LXM6aGFzQ2xhc3NpZmllckNvdW50cnknLCAnZDpDb3VudHJ5X1JVUycpICYmXG4gICAgICAhaW5kaXZpZHVhbC5oYXNWYWx1ZSgndi1zOmhhc0NsYXNzaWZpZXJMZWdhbEZvcm0nLCAnZDpPS09QRl81MDEwMicpICYmXG4gICAgICAhaW5kaXZpZHVhbC5oYXNWYWx1ZSgndi1zOmhhc0NsYXNzaWZpZXJMZWdhbEZvcm0nLCAnZDpPS09QRl81MDAwMCcpXG4gICAgKSB7XG4gICAgICByZXN1bHRbJ3Ytczp0YXhSZWdpc3RyYXRpb25DYXVzZSddID0ge1xuICAgICAgICBzdGF0ZTogL15bMC05XXs5fSQvLnRlc3QoaW5kaXZpZHVhbFsndi1zOnRheFJlZ2lzdHJhdGlvbkNhdXNlJ11bMF0pLFxuICAgICAgICBjYXVzZTogWyd2LXVpOnJlZ2V4cCddLFxuICAgICAgfTtcbiAgICB9XG4gICAgdGVtcGxhdGVbMF0uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3ZhbGlkYXRlZCcsIHtkZXRhaWw6IHJlc3VsdH0pKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgcG9zdCA9IGZ1bmN0aW9uIChpbmRpdmlkdWFsLCB0ZW1wbGF0ZSwgY29udGFpbmVyLCBtb2RlLCBleHRyYSkge1xuICB0ZW1wbGF0ZSA9ICQodGVtcGxhdGUpO1xuICBjb250YWluZXIgPSAkKGNvbnRhaW5lcik7XG5cbiAgLy8g0JPQtdC90LXRgNCw0YbQuNGPIFVyaVxuICBCcm93c2VyVXRpbC5yZWdpc3RlckhhbmRsZXIoaW5kaXZpZHVhbCwgJ2JlZm9yZVNhdmUnLCB0ZW1wbGF0ZSwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHNob3J0TGFiZWwgPSBpbmRpdmlkdWFsWyd2LXM6aGFzQ2xhc3NpZmllckNvdW50cnknXVswXVsndi1zOnNob3J0TGFiZWwnXTtcbiAgICBjb25zdCB0YXhJZCA9IGluZGl2aWR1YWxbJ3Ytczp0YXhJZCddO1xuICAgIGlmIChpbmRpdmlkdWFsLmhhc1ZhbHVlKCd2LXM6aGFzQ2xhc3NpZmllckNvdW50cnknLCAnZDpDb3VudHJ5X1JVUycpICYmIGluZGl2aWR1YWwuaXNOZXcoKSkge1xuICAgICAgaW5kaXZpZHVhbC5pZCA9ICdkOm9yZ18nICsgc2hvcnRMYWJlbCArIHRheElkO1xuICAgIH0gZWxzZSBpZiAoaW5kaXZpZHVhbC5pc05ldygpKSB7XG4gICAgICBpbmRpdmlkdWFsLmlkID0gJ2Q6b3JnXycgKyB0YXhJZDtcbiAgICB9XG4gIH0pO1xuXG4gICQoJyNhZGQtc3Vic2lkaWFyeScsIHRlbXBsYXRlKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgbGV0IG1vZGFsID0gJCgnI25vdGlmaWNhdGlvbi1tb2RhbC10ZW1wbGF0ZScpLmh0bWwoKTtcbiAgICBtb2RhbCA9ICQobW9kYWwpO1xuICAgIG1vZGFsLm1vZGFsKHtzaG93OiBmYWxzZX0pO1xuICAgICQoJ2JvZHknKS5hcHBlbmQobW9kYWwpO1xuICAgIG1vZGFsLm1vZGFsKCdzaG93Jyk7XG4gICAgdGVtcGxhdGUub25lKCdyZW1vdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2RhbC5tb2RhbCgnaGlkZScpLnJlbW92ZSgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGNudHIgPSAkKCcubW9kYWwtYm9keScsIG1vZGFsKTtcbiAgICBjb25zdCBfY2xhc3MgPSBuZXcgSW5kaXZpZHVhbE1vZGVsKCd2LXM6U3Vic2lkaWFyeScpO1xuICAgIGNvbnN0IHN1YnNpZGlhcnkgPSBuZXcgSW5kaXZpZHVhbE1vZGVsKCk7XG4gICAgY29uc3QgdG1wbCA9IG5ldyBJbmRpdmlkdWFsTW9kZWwoJ3YtczpTdWJzaWRpYXJ5VGVtcGxhdGUnKTtcbiAgICBzdWJzaWRpYXJ5WydyZGY6dHlwZSddID0gW19jbGFzc107XG4gICAgc3Vic2lkaWFyeVsndi1zOmJhY2t3YXJkVGFyZ2V0J10gPSBbaW5kaXZpZHVhbF07XG4gICAgc3Vic2lkaWFyeVsndi1zOmJhY2t3YXJkUHJvcGVydHknXSA9IFtuZXcgSW5kaXZpZHVhbE1vZGVsKCd2LXM6aGFzU3Vic2lkaWFyeScpXTtcbiAgICBzdWJzaWRpYXJ5Wyd2LXM6Y2FuUmVhZCddID0gW3RydWVdO1xuICAgIHN1YnNpZGlhcnkucHJlc2VudChjbnRyLCB0bXBsLCAnZWRpdCcpO1xuICAgIHN1YnNpZGlhcnkub25lKCdiZWZvcmVSZXNldCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vZGFsLm1vZGFsKCdoaWRlJykucmVtb3ZlKCk7XG4gICAgfSk7XG4gICAgc3Vic2lkaWFyeS5vbmUoJ2FmdGVyU2F2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vZGFsLm1vZGFsKCdoaWRlJykucmVtb3ZlKCk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGh0bWwgPSBgXG48ZGl2PlxuICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyIHNoZWV0XCI+XG4gICAgPGgyPlxuICAgICAgPHNwYW4gYWJvdXQ9XCJ2LXM6T3JnYW5pemF0aW9uXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9zcGFuPlxuICAgICAgPHNtYWxsIGFib3V0PVwiQFwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvc21hbGw+XG4gICAgPC9oMj5cbiAgICA8aHI+XG4gICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC04XCI+XG4gICAgICAgIDxlbSBhYm91dD1cInJkZnM6bGFiZWxcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L2VtPlxuICAgICAgICA8ZGl2IHByb3BlcnR5PVwicmRmczpsYWJlbFwiIGNsYXNzPVwidmlldyAtZWRpdCAtc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgIDx2ZWRhLWNvbnRyb2wgZGF0YS10eXBlPVwic3RyaW5nXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCIgY2xhc3M9XCItdmlldyBlZGl0IHNlYXJjaFwiPjwvdmVkYS1jb250cm9sPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLThcIj5cbiAgICAgICAgPGVtIGFib3V0PVwidi1zOkZ1bGxOYW1lT3JnQnVuZGxlXCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9lbT5cbiAgICAgICAgPGRpdiBwcm9wZXJ0eT1cInYtczp0aXRsZVwiIGNsYXNzPVwidmlldyAtZWRpdCAtc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgIDx2ZWRhLWNvbnRyb2wgZGF0YS10eXBlPVwic3RyaW5nXCIgcHJvcGVydHk9XCJ2LXM6dGl0bGVcIiBjbGFzcz1cIi12aWV3IGVkaXQgc2VhcmNoXCI+PC92ZWRhLWNvbnRyb2w+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8aHIgY2xhc3M9XCJ2aWV3IC1lZGl0IC1zZWFyY2hcIj5cbiAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTRcIj5cbiAgICAgICAgPGVtIGFib3V0PVwidi1zOmhhc0NsYXNzaWZpZXJDb3VudHJ5XCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9lbT5cbiAgICAgICAgPGRpdiByZWw9XCJ2LXM6aGFzQ2xhc3NpZmllckNvdW50cnlcIiBjbGFzcz1cInZpZXcgLWVkaXQgc2VhcmNoXCIgZGF0YS10ZW1wbGF0ZT1cInYtdWk6TGFiZWxUZW1wbGF0ZVwiPjwvZGl2PlxuICAgICAgICA8dmVkYS1jb250cm9sIGRhdGEtdHlwZT1cImxpbmtcIiByZWw9XCJ2LXM6aGFzQ2xhc3NpZmllckNvdW50cnlcIiBjbGFzcz1cIi12aWV3IGVkaXQgc2VhcmNoIGZ1bGx0ZXh0XCIgZGF0YS10ZW1wbGF0ZT1cIntALnYtczpzaG9ydExhYmVsfSB8IHtALnJkZnM6bGFiZWx9XCI+PC92ZWRhLWNvbnRyb2w+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtOFwiPlxuICAgICAgICA8ZW0gYWJvdXQ9XCJ2LXM6aGFzQ2xhc3NpZmllckxlZ2FsRm9ybVwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvZW0+XG4gICAgICAgIDxkaXYgcmVsPVwidi1zOmhhc0NsYXNzaWZpZXJMZWdhbEZvcm1cIiBjbGFzcz1cInZpZXcgLWVkaXQgc2VhcmNoXCIgZGF0YS10ZW1wbGF0ZT1cInYtdWk6TGFiZWxUZW1wbGF0ZVwiPjwvZGl2PlxuICAgICAgICA8dmVkYS1jb250cm9sIGRhdGEtdHlwZT1cImxpbmtcIiByZWw9XCJ2LXM6aGFzQ2xhc3NpZmllckxlZ2FsRm9ybVwiIGNsYXNzPVwiLXZpZXcgZWRpdCBzZWFyY2ggZnVsbHRleHRcIj48L3ZlZGEtY29udHJvbD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxociBjbGFzcz1cInZpZXcgLWVkaXQgLXNlYXJjaFwiPlxuICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPlxuICAgICAgICA8ZW0gYWJvdXQ9XCJ2LXM6dGF4SWRcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L2VtPlxuICAgICAgICA8ZGl2IHByb3BlcnR5PVwidi1zOnRheElkXCIgY2xhc3M9XCJ2aWV3IC1lZGl0IC1zZWFyY2hcIj48L2Rpdj5cbiAgICAgICAgPHZlZGEtY29udHJvbCBkYXRhLXR5cGU9XCJzdHJpbmdcIiBwcm9wZXJ0eT1cInYtczp0YXhJZFwiIGNsYXNzPVwiLXZpZXcgZWRpdCBzZWFyY2hcIj48L3ZlZGEtY29udHJvbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00XCI+XG4gICAgICAgIDxlbSBhYm91dD1cInYtczp0YXhSZWdpc3RyYXRpb25DYXVzZVwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvZW0+XG4gICAgICAgIDxkaXYgcHJvcGVydHk9XCJ2LXM6dGF4UmVnaXN0cmF0aW9uQ2F1c2VcIiBjbGFzcz1cInZpZXcgLWVkaXQgLXNlYXJjaFwiPjwvZGl2PlxuICAgICAgICA8dmVkYS1jb250cm9sIGRhdGEtdHlwZT1cInN0cmluZ1wiIHByb3BlcnR5PVwidi1zOnRheFJlZ2lzdHJhdGlvbkNhdXNlXCIgY2xhc3M9XCItdmlldyBlZGl0IHNlYXJjaFwiPjwvdmVkYS1jb250cm9sPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTRcIj5cbiAgICAgICAgPGVtIGFib3V0PVwidi1zOnRheFJlZ2lzdHJhdGlvbk51bWJlclwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvZW0+XG4gICAgICAgIDxkaXYgcHJvcGVydHk9XCJ2LXM6dGF4UmVnaXN0cmF0aW9uTnVtYmVyXCIgY2xhc3M9XCJ2aWV3IC1lZGl0IC1zZWFyY2hcIj48L2Rpdj5cbiAgICAgICAgPHZlZGEtY29udHJvbCBkYXRhLXR5cGU9XCJzdHJpbmdcIiBwcm9wZXJ0eT1cInYtczp0YXhSZWdpc3RyYXRpb25OdW1iZXJcIiBjbGFzcz1cIi12aWV3IGVkaXQgc2VhcmNoXCI+PC92ZWRhLWNvbnRyb2w+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxociBjbGFzcz1cInZpZXcgLWVkaXQgLXNlYXJjaFwiPlxuXG4gICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00XCI+XG4gICAgICAgIDxlbSBhYm91dD1cInYtczpsZWdhbEFkZHJlc3NcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L2VtPlxuICAgICAgICA8ZGl2IHByb3BlcnR5PVwidi1zOmxlZ2FsQWRkcmVzc1wiIGNsYXNzPVwidmlldyAtZWRpdCAtc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgIDx2ZWRhLWNvbnRyb2wgZGF0YS10eXBlPVwidGV4dFwiIHJvd3M9XCIzXCIgcHJvcGVydHk9XCJ2LXM6bGVnYWxBZGRyZXNzXCIgY2xhc3M9XCItdmlldyBlZGl0IHNlYXJjaFwiPjwvdmVkYS1jb250cm9sPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTRcIj5cbiAgICAgICAgPGVtIGFib3V0PVwidi1zOnBvc3RhbEFkZHJlc3NcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L2VtPlxuICAgICAgICA8ZGl2IHByb3BlcnR5PVwidi1zOnBvc3RhbEFkZHJlc3NcIiBjbGFzcz1cInZpZXcgLWVkaXQgLXNlYXJjaFwiPjwvZGl2PlxuICAgICAgICA8dmVkYS1jb250cm9sIGRhdGEtdHlwZT1cInRleHRcIiByb3dzPVwiM1wiIHByb3BlcnR5PVwidi1zOnBvc3RhbEFkZHJlc3NcIiBjbGFzcz1cIi12aWV3IGVkaXQgc2VhcmNoXCI+PC92ZWRhLWNvbnRyb2w+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8aHIgY2xhc3M9XCJ2aWV3IC1lZGl0IC1zZWFyY2hcIj5cbiAgICA8ZW0gYWJvdXQ9XCJ2LXM6TGVnYWxFbnRpdHlFeGlzdGVuY2VQZXJpb2RCdW5kbGVcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L2VtPlxuICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNFwiPlxuICAgICAgICA8ZGl2IHByb3BlcnR5PVwidi1zOmRhdGVGcm9tRmFjdFwiIGNsYXNzPVwidmlldyAtZWRpdCAtc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgIDx2ZWRhLWNvbnRyb2wgcHJvcGVydHk9XCJ2LXM6ZGF0ZUZyb21GYWN0XCIgZGF0YS10eXBlPVwiZGF0ZVwiIGNsYXNzPVwiLXZpZXcgZWRpdCBzZWFyY2hcIj48L3ZlZGEtY29udHJvbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC00XCI+XG4gICAgICAgIDxkaXYgcHJvcGVydHk9XCJ2LXM6ZGF0ZVRvRmFjdFwiIGNsYXNzPVwidmlldyAtZWRpdCAtc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgIDx2ZWRhLWNvbnRyb2wgcHJvcGVydHk9XCJ2LXM6ZGF0ZVRvRmFjdFwiIGRhdGEtdHlwZT1cImRhdGVcIiBjbGFzcz1cIi12aWV3IGVkaXQgc2VhcmNoXCI+PC92ZWRhLWNvbnRyb2w+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZW0gYWJvdXQ9XCJ2LXM6aGFzU3Vic2lkaWFyeVwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvZW0+XG4gICAgPHRhYmxlIGNsYXNzPVwidGFibGUgdGFibGUtY29uZGVuc2VkIHRhYmxlLWJvcmRlcmVkXCI+XG4gICAgICA8dGhlYWQ+XG4gICAgICAgIDx0ciBjbGFzcz1cInZpZXcgLWVkaXQgLXNlYXJjaCBhY3RpdmVcIj5cbiAgICAgICAgICA8dGggd2lkdGg9XCIxJVwiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1zZWFyY2hcIj48L3RoPlxuICAgICAgICAgIDx0aCBhYm91dD1cInJkZnM6bGFiZWxcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L3RoPlxuICAgICAgICAgIDx0aCBhYm91dD1cInYtczp0YXhSZWdpc3RyYXRpb25DYXVzZVwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvdGg+XG4gICAgICAgICAgPHRoIGFib3V0PVwidi1zOnBvc3RhbEFkZHJlc3NcIiBwcm9wZXJ0eT1cInJkZnM6bGFiZWxcIj48L3RoPlxuICAgICAgICA8L3RyPlxuICAgICAgPC90aGVhZD5cbiAgICAgIDx0Ym9keSByZWw9XCJ2LXM6aGFzU3Vic2lkaWFyeVwiIGRhdGEtZW1iZWRkZWQ9XCJ0cnVlXCI+XG4gICAgICAgIDx0cj5cbiAgICAgICAgICA8dGQgYWJvdXQ9XCJAXCIgZGF0YS10ZW1wbGF0ZT1cInYtdWk6SWNvbk1vZGFsVGVtcGxhdGVcIj48L3RkPlxuICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgIDxkaXYgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCIgY2xhc3M9XCJ2aWV3IC1lZGl0IC1zZWFyY2hcIj48L2Rpdj5cbiAgICAgICAgICAgIDx2ZWRhLWNvbnRyb2wgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCIgZGF0YS10eXBlPVwic3RyaW5nXCIgY2xhc3M9XCItdmlldyBlZGl0IHNlYXJjaFwiPjwvdmVkYS1jb250cm9sPlxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgPHRkPlxuICAgICAgICAgICAgPGRpdiBwcm9wZXJ0eT1cInYtczp0YXhSZWdpc3RyYXRpb25DYXVzZVwiIGNsYXNzPVwidmlldyAtZWRpdCAtc2VhcmNoXCI+PC9kaXY+XG4gICAgICAgICAgICA8dmVkYS1jb250cm9sIHByb3BlcnR5PVwidi1zOnRheFJlZ2lzdHJhdGlvbkNhdXNlXCIgZGF0YS10eXBlPVwic3RyaW5nXCIgY2xhc3M9XCItdmlldyBlZGl0IHNlYXJjaFwiPjwvdmVkYS1jb250cm9sPlxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgPHRkPlxuICAgICAgICAgICAgPGRpdiBwcm9wZXJ0eT1cInYtczpwb3N0YWxBZGRyZXNzXCIgY2xhc3M9XCJ2aWV3IC1lZGl0IC1zZWFyY2hcIj48L2Rpdj5cbiAgICAgICAgICAgIDx2ZWRhLWNvbnRyb2wgcHJvcGVydHk9XCJ2LXM6cG9zdGFsQWRkcmVzc1wiIGRhdGEtdHlwZT1cInN0cmluZ1wiIGNsYXNzPVwiLXZpZXcgZWRpdCBzZWFyY2hcIj48L3ZlZGEtY29udHJvbD5cbiAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgPC90Ym9keT5cbiAgICA8L3RhYmxlPlxuICAgIDxkaXYgY2xhc3M9XCJ2aWV3IC1lZGl0IC1zZWFyY2hcIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3NcIiBpZD1cImFkZC1zdWJzaWRpYXJ5XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi16b29tLWluXCI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBhYm91dD1cInYtczpBZGRTdWJzaWRpYXJ5XCIgcHJvcGVydHk9XCJyZGZzOmxhYmVsXCI+PC9zcGFuPlxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG5cbiAgICA8ZW0gYWJvdXQ9XCJ2LXM6SGVhZE9yZ2FuaXphdGlvblwiIHByb3BlcnR5PVwicmRmczpsYWJlbFwiPjwvZW0+XG4gICAgPGRpdiByZWw9XCJ2LXM6cGFyZW50VW5pdFwiIGNsYXNzPVwidmlldyAtZWRpdCAtc2VhcmNoXCIgZGF0YS10ZW1wbGF0ZT1cInYtdWk6TGFiZWxUZW1wbGF0ZVwiPjwvZGl2PlxuICAgIDx2ZWRhLWNvbnRyb2wgZGF0YS10eXBlPVwibGlua1wiIHJlbD1cInYtczpwYXJlbnRVbml0XCIgY2xhc3M9XCItdmlldyBlZGl0IHNlYXJjaCBmdWxsdGV4dFwiPjwvdmVkYS1jb250cm9sPlxuICAgIDxociBjbGFzcz1cInZpZXcgLWVkaXQgLXNlYXJjaFwiPlxuXG4gICAgPGRpdiBhYm91dD1cIkBcIiBkYXRhLXRlbXBsYXRlPVwidi11aTpTeXN0ZW1Qcm9wZXJ0aWVzVGVtcGxhdGVcIiBkYXRhLWVtYmVkZGVkPVwidHJ1ZVwiPjwvZGl2PlxuICAgIDxicj5cbiAgICA8IS0tIEJVVFRPTlMgLS0+XG4gICAgPGRpdiBjbGFzcz1cImFjdGlvbnNcIj5cbiAgICAgIDxzcGFuIGFib3V0PVwiQFwiIGRhdGEtdGVtcGxhdGU9XCJ2LXVpOlN0YW5kYXJkQnV0dG9uc1RlbXBsYXRlXCIgZGF0YS1lbWJlZGRlZD1cInRydWVcIiBkYXRhLWJ1dHRvbnM9XCJlZGl0IHNhdmUgY2FuY2VsIGRlbGV0ZSBqb3VybmFsXCI+PC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBhYm91dD1cIkBcIiBjbGFzcz1cImNvbnRhaW5lciBzaGVldCB2aWV3IGVkaXQgLXNlYXJjaFwiIGRhdGEtdGVtcGxhdGU9XCJ2LXM6TGlua3NUZW1wbGF0ZVwiIGRhdGEtZW1iZWRkZWQ9XCJ0cnVlXCI+PC9kaXY+XG4gIDxkaXYgYWJvdXQ9XCJAXCIgY2xhc3M9XCJjb250YWluZXIgc2hlZXQgdmlldyAtZWRpdCAtc2VhcmNoXCIgZGF0YS10ZW1wbGF0ZT1cInYtczpDb21tZW50c1RlbXBsYXRlXCI+PC9kaXY+XG48L2Rpdj5cbmA7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O01BQU9BLFdBQVcsR0FBQUMsZ0JBQUEsQ0FBQUMsT0FBQTtJQUFBLGFBQUFDLE9BQUE7TUFDWEMsQ0FBQyxHQUFBRCxPQUFBLENBQUFELE9BQUE7SUFBQSxhQUFBRyxlQUFBO01BQ0RDLElBQUksR0FBQUQsZUFBQSxDQUFBSCxPQUFBO0lBQUEsYUFBQUssMkJBQUE7TUFDSkMsZUFBZSxHQUFBRCwyQkFBQSxDQUFBTCxPQUFBO0lBQUEsYUFBQU8sa0JBQUE7TUFDZkMsT0FBTyxHQUFBRCxrQkFBQSxDQUFBUCxPQUFBO0lBQUE7SUFBQVMsT0FBQSxXQUFBQSxDQUFBO01BQUFDLE9BQUEsUUFFREMsR0FB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